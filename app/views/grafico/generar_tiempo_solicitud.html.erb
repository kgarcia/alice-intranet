<div class="row">   
   <div class="col-lg-12">
      <div class="ibox float-e-margins">
          <div class="ibox-title">
              <h2 class="parametros-titulo"><%= "Reportes Estadisticos" %></h2>
          </div>
      </div>
      <div class="ibox-content row">
      	  <h2 class="parametros-titulo"><%= @titulo %></h2>
          <h4>Desde el <%= @fecha_inicio.strftime("%d/%m/%Y") %> hasta el <%= @fecha_fin.strftime("%d/%m/%Y") %></h4>
		  <div id="container" width="500px" height="300px"></div>
          <div class="row">
            <%= link_to 'AtrÃ¡s', "/grafico/tiempo_solicitud", :class => "btn btn-sm btn-success " %>
          </div>
      </div>




  </div>
</div>

<script type="text/javascript">
	       
    <% if @tipo_entidad == 1.to_s %>
        <% if @entidad == "" %>
            Highcharts.chart('container', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Tiempo promedio de Solicitud'
                },
                xAxis: {
                    categories: [
                        <% @especialidades.each do |especialidad| %>
                            '<%= especialidad.descripcion %>',
                        <% end %>
                    ],
                    crosshair: true
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Horas'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Tiempo promedio de Solicitud',
                    data: [
                        <% @especialidades.each do |especialidad| %>
                            <%= especialidad.contarTiempoSolicitud(@fecha_inicio,@fecha_fin) %>,
                        <% end %>
                    ]

                }]
            });
        <% else %>
            Highcharts.chart('container', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Tiempo promedio de Solicitud'
                },
                xAxis: {
                    categories: [
                        '<%= @especialidad.descripcion %>',
                    ],
                    crosshair: true
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Horas'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Tiempo promedio de Solicitud de <%= @especialidad.descripcion %>',
                    data: [
                            <%= @especialidad.contarTiempoSolicitud(@fecha_inicio,@fecha_fin) %>,
                    ]

                },{
                    name: 'Tiempo promedio de Solicitud general',
                    data: [
                        <%= Especialidad.contarTiempoSolicitud(@fecha_inicio,@fecha_fin) %>,
                    ]

                }]
            });
        <% end %>

    <% elsif @tipo_entidad == 2.to_s %>
        <% if @entidad == "" %>
            Highcharts.chart('container', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Tiempo promedio de Solicitud'
                },
                xAxis: {
                    categories: [
                        <% @tipoServicios.each do |tipoServicio| %>
                            '<%= tipoServicio.descripcion %>',
                        <% end %>
                    ],
                    crosshair: true
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Horas'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Tiempo promedio de Solicitud',
                    data: [
                        <% @tipoServicios.each do |tipoServicio| %>
                            <%= tipoServicio.contarTiempoSolicitud(@fecha_inicio,@fecha_fin) %>,
                        <% end %>
                    ]

                }]
            });
        <% else %>
            Highcharts.chart('container', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Tiempo promedio de Solicitud'
                },
                xAxis: {
                    categories: [
                        '<%= @tipoServicio.descripcion %>',
                    ],
                    crosshair: true
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Horas'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Tiempo promedio de Solicitud de <%= @tipoServicio.descripcion%>',
                    data: [
                            <%= @tipoServicio.contarTiempoSolicitud(@fecha_inicio,@fecha_fin) %>,
                    ]

                },{
                    name: 'Tiempo promedio de Solicitud general',
                    data: [
                        <%= TipoServicio.contarTiempoSolicitud(@fecha_inicio,@fecha_fin) %>,
                    ]

                }]
            });
        <% end %>
    <% else %>
        <% if @entidad == "" %>
            Highcharts.chart('container', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Tiempo promedio de Solicitud'
                },
                xAxis: {
                    categories: [
                        <% @servicios.each do |servicio| %>
                            '<%= servicio.descripcion %>',
                        <% end %>
                    ],
                    crosshair: true
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Horas'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Tiempo promedio de Solicitud',
                    data: [
                        <% @servicios.each do |servicio| %>
                            <%= servicio.contarTiempoSolicitud(@fecha_inicio,@fecha_fin) %>,
                        <% end %>
                    ]

                }]
            });
        <% else %>
            Highcharts.chart('container', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Tiempo promedio de Solicitud'
                },
                xAxis: {
                    categories: [
                        '<%= @servicio.descripcion %>',
                    ],
                    crosshair: true
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Horas'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Tiempo promedio de Solicitud de <%= @servicio.descripcion %>',
                    data: [
                            <%= @servicio.contarTiempoSolicitud(@fecha_inicio,@fecha_fin) %>,
                    ]

                },{
                    name: 'Tiempo promedio de Solicitud general',
                    data: [
                        <%= Servicio.contarTiempoSolicitud(@fecha_inicio,@fecha_fin) %>,
                    ]

                }]
            });
        <% end %>
    <% end %> 
</script>